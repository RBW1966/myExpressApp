var socket = null;
var user_id = null;
var terminated = false;
var timer;
var timeout = (function () {
    return function () {
        window.clearTimeout(timer);
        timer = window.setTimeout(() => {
            // Nothing to do
        }, 5000);
    };
})();
window.addEventListener('load', () => {
    adoIt();
});
// Disable key press
function disableKeyPressing(e) {
    // keycode for F5 function
    if (e.keyCode === 116) {
        e.returnValue = false;
        e.keyCode = 0;
        return false;
    }
    // keycode for Ctrl+R
    if (e.keyCode === 82) {
        if (e.ctrlKey) {
            e.returnValue = false;
            e.keyCode = 0;
            return false;
        }
    }
    // keycode for backspace
    if (e.keyCode === 8) {
        // try to cancel the backspace
        e.returnValue = false;
        e.keyCode = 0;
        return false;
    }
}
function doDisconnect() {
    if (terminated)
        return;
    console.log('doDisconnect');
    alert('Lost connection to myExpressApp.');
    socket.open();
}
function doLogout() {
    terminated = true;
    console.log('doLogout');
    location.href = "/logout";
}
function doRecon() {
    console.log('doRecon');
    socket.close();
}
function doTerminate() {
    terminated = true;
    console.log('doTerminate');
    alert('myExpressApp is offline.');
    location.href = "https://github.com/RBW1966/myExpressApp";
}
function doConnect() {
    socket.emit('register user', user_id);
}
function adoIt() {
    user_id = getCookie("USER_ID");
    console.log(`myID=${user_id}`);
    socket = io();
    socket.on('terminate', doTerminate);
    socket.on('logout', doLogout);
    socket.on('recon', doRecon);
    socket.on('disconnect', doDisconnect);
    socket.on('chat', doIncomingChatMessage);
    socket.on('connect', doConnect);
    socket.emit('register user', user_id);
    document.getElementById("form1").addEventListener('submit', function (evt) {
        const m = document.getElementById("m");
        evt.preventDefault();
        if (m.value.length) {
            m.placeholder = '';
            let x = timeout();
            socket.emit('chat message', m.value);
            m.value = '';
        }
    });
    document.addEventListener('keydown', (e) => {
        // F5 is pressed
        if ((e.which || e.keyCode) == 116) {
            disableKeyPressing(e);
            console.log('F5 was ignored.');
        }
        // Backspace
        if (e.keyCode == 8) {
            console.log(e.target.id);
            switch (e.target.id) {
                case "m":
                    break;
                default:
                    disableKeyPressing(e);
                    console.log('Backspace was ignored.');
            }
        }
        // Ctrl+R
        if (e.ctrlKey && (e.which === 82)) {
            disableKeyPressing(e);
            console.log('Ctrl+R was ignored.');
        }
    });
}
function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VjdXJlZC5hcHAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzZWN1cmVkLmFwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUM7QUFDbEIsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ25CLElBQUksVUFBVSxHQUFHLEtBQUssQ0FBQztBQUN2QixJQUFJLEtBQUssQ0FBQztBQUVWLElBQUksT0FBTyxHQUFHLENBQUM7SUFDYixPQUFPO1FBQ0wsTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixLQUFLLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBRSxHQUFHLEVBQUU7WUFDOUIsZ0JBQWdCO1FBQ2xCLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNYLENBQUMsQ0FBQTtBQUNILENBQUMsQ0FBQyxFQUFFLENBQUM7QUFFTCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtJQUNuQyxLQUFLLEVBQUUsQ0FBQztBQUNWLENBQUMsQ0FBQyxDQUFDO0FBQ0gsb0JBQW9CO0FBQ3BCLFNBQVMsa0JBQWtCLENBQUMsQ0FBQztJQUN2QiwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDLENBQUMsT0FBTyxLQUFLLEdBQUcsRUFBRTtRQUNyQixDQUFDLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN0QixDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztRQUNkLE9BQU8sS0FBSyxDQUFDO0tBQ2Q7SUFDRCxxQkFBcUI7SUFDckIsSUFBSSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUUsRUFBRTtRQUNwQixJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUU7WUFDYixDQUFDLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztZQUN0QixDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztZQUNkLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7S0FDRjtJQUNELHdCQUF3QjtJ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QyxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUU7WUFDdkIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdEI7UUFDRCxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ3RCLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUM3QztLQUNKO0lBQ0QsT0FBTyxFQUFFLENBQUM7QUFDWixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHNvY2tldCA9IG51bGw7XHJcbnZhciB1c2VyX2lkID0gbnVsbDtcclxudmFyIHRlcm1pbmF0ZWQgPSBmYWxzZTtcclxudmFyIHRpbWVyO1xyXG5cclxudmFyIHRpbWVvdXQgPSAoZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIpO1xyXG4gICAgdGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAvLyBOb3RoaW5nIHRvIGRvXHJcbiAgICB9LCA1MDAwKTtcclxuICB9XHJcbn0pKCk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICBhZG9JdCgpO1xyXG59KTtcclxuLy8gRGlzYWJsZSBrZXkgcHJlc3NcclxuZnVuY3Rpb24gZGlzYWJsZUtleVByZXNzaW5nKGUpIHtcclxuICAgICAgLy8ga2V5Y29kZSBmb3IgRjUgZnVuY3Rpb25cclxuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTE2KSB7XHJcbiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgIGUua2V5Q29kZSA9IDA7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGtleWNvZGUgZm9yIEN0cmwrUlxyXG4gICAgICBpZiAoZS5rZXlDb2RlID09PSA4Mikge1xyXG4gICAgICAgIGlmIChlLmN0cmxLZXkpIHtcclxuICAgICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgIGUua2V5Q29kZSA9IDA7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7ICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBrZXljb2RlIGZvciBiYWNrc3BhY2VcclxuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gOCkge1xyXG4gICAgICAgIC8vIHRyeSB0byBjYW5jZWwgdGhlIGJhY2tzcGFjZVxyXG4gICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICBlLmtleUNvZGUgPSAwO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRvRGlzY29ubmVjdCgpIHtcclxuICBpZiAodGVybWluYXRlZCkgcmV0dXJuO1xyXG4gIGNvbnNvbGUubG9nKCdkb0Rpc2Nvbm5lY3QnKTtcclxuICBhbGVydCgnTG9zdCBjb25uZWN0aW9uIHRvIG15RXhwcmVzc0FwcC4nKTtcclxuICBzb2NrZXQub3BlbigpO1xyXG59XHJcbmZ1bmN0aW9uIGRvTG9nb3V0KCkge1xyXG4gIHRlcm1pbmF0ZWQgPSB0cnVlO1xyXG4gIGNvbnNvbGUubG9nKCdkb0xvZ291dCcpO1xyXG4gIGxvY2F0aW9uLmhyZWYgPSBcIi9sb2dvdXRcIjtcclxufVxyXG5mdW5jdGlvbiBkb1JlY29uKCkge1xyXG4gIGNvbnNvbGUubG9nKCdkb1JlY29uJyk7XHJcbiAgc29ja2V0LmNsb3NlKCk7XHJcbn1cclxuZnVuY3Rpb24gZG9UZXJtaW5hdGUoKSB7XHJcbiAgdGVybWluYXRlZCA9IHRydWU7XHJcbiAgY29uc29sZS5sb2coJ2RvVGVybWluYXRlJyk7XHJcbiAgYWxlcnQoJ215RXhwcmVzc0FwcCBpcyBvZmZsaW5lLicpO1xyXG4gIGxvY2F0aW9uLmhyZWYgPVwiaHR0cHM6Ly9naXRodWIuY29tL1JCVzE5NjYvbXlFeHByZXNzQXBwXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRvQ29ubmVjdCgpIHtcclxuICBzb2NrZXQuZW1pdCgncmVnaXN0ZXIgdXNlcicsIHVzZXJfaWQpO1xyXG59XHJcbmZ1bmN0aW9uIGFkb0l0KCkge1xyXG4gIHVzZXJfaWQgPSBnZXRDb29raWUoXCJVU0VSX0lEXCIpO1xyXG4gIGNvbnNvbGUubG9nKGBteUlEPSR7dXNlcl9pZH1gKTtcclxuICBzb2NrZXQgPSBpbygpO1xyXG4gIHNvY2tldC5vbigndGVybWluYXRlJywgZG9UZXJtaW5hdGUpO1xyXG4gIHNvY2tldC5vbignbG9nb3V0JywgZG9Mb2dvdXQpO1xyXG4gIHNvY2tldC5vbigncmVjb24nLCBkb1JlY29uKTtcclxuICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCBkb0Rpc2Nvbm5lY3QpO1xyXG4gIHNvY2tldC5vbignY2hhdCcsIGRvSW5jb21pbmdDaGF0TWVzc2FnZSlcclxuICBzb2NrZXQub24oJ2Nvbm5lY3QnLCBkb0Nvbm5lY3QpO1xyXG4gIHNvY2tldC5lbWl0KCdyZWdpc3RlciB1c2VyJywgdXNlcl9pZCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb3JtMVwiKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbihldnQpIHtcclxuICAgIGNvbnN0IG0gPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1cIik7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmIChtLnZhbHVlLmxlbmd0aCkge1xyXG4gICAgICBtLnBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICAgIGxldCB4ID0gdGltZW91dCgpO1xyXG4gICAgICBzb2NrZXQuZW1pdCgnY2hhdCBtZXNzYWdlJywgbS52YWx1ZSk7XHJcbiAgICAgIG0udmFsdWUgPSAnJztcclxuICAgIH1cclxuICB9KTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuICAgIC8vIEY1IGlzIHByZXNzZWRcclxuICAgIGlmKChlLndoaWNoIHx8IGUua2V5Q29kZSkgPT0gMTE2KSB7XHJcbiAgICAgIGRpc2FibGVLZXlQcmVzc2luZyhlKTtcclxuICAgICAgY29uc29sZS5sb2coJ0Y1IHdhcyBpZ25vcmVkLicpO1xyXG4gICAgfVxyXG4gICAgLy8gQmFja3NwYWNlXHJcbiAgICBpZiAoZS5rZXlDb2RlID09IDgpIHtcclxuICAgICAgY29uc29sZS5sb2coKDxIVE1MSW5wdXRFbGVtZW50PmUudGFyZ2V0KS5pZCk7XHJcbiAgICAgIHN3aXRjaCAoKDxIVE1MSW5wdXRFbGVtZW50PmUudGFyZ2V0KS5pZCkge1xyXG4gICAgICAgIGNhc2UgXCJtXCI6XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgZGlzYWJsZUtleVByZXNzaW5nKGUpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0JhY2tzcGFjZSB3YXMgaWdub3JlZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQ3RybCtSXHJcbiAgICBpZiAoZS5jdHJsS2V5ICYmIChlLndoaWNoID09PSA4MikgKSB7XHJcbiAgICAgICAgZGlzYWJsZUtleVByZXNzaW5nKGUpO1xyXG4gICAgICAgY29uc29sZS5sb2coJ0N0cmwrUiB3YXMgaWdub3JlZC4nKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29va2llKGNuYW1lKSB7XHJcbiAgdmFyIG5hbWUgPSBjbmFtZSArIFwiPVwiO1xyXG4gIHZhciBkZWNvZGVkQ29va2llID0gZGVjb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmNvb2tpZSk7XHJcbiAgdmFyIGNhID0gZGVjb2RlZENvb2tpZS5zcGxpdCgnOycpO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPGNhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBjID0gY2FbaV07XHJcbiAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpIHtcclxuICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYy5pbmRleE9mKG5hbWUpID09IDApIHtcclxuICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xyXG4gICAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBcIlwiO1xyXG59Il19